{"mappings":"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","sources":["src/JS/news/favorite.js","src/JS/news/check-local-storage.js","src/JS/news/btn-favorite.js","src/JS/news/btn-read.js"],"sourcesContent":["// // Получаем данные из localStorage и преобразуем их из JSON-строки в объект\n// const storedData = JSON.parse(localStorage.getItem(\"favoriteCards\"));\n\n// // Сортируем объекты по дате сохранения (предполагается, что у каждого объекта есть свойство \"date\")\n// storedData.sort((a, b) => new Date(b.pub_date) - new Date(a.pub_date));\n\n// // Выводим объекты на страницу\n// const container = document.querySelector(\".container\");\n// storedData.forEach(item => {\n//   const element = document.createElement(\"div\");\n//   element.textContent = item.data;\n//   container.appendChild(element);\n// });\nimport { checkLokalStorage } from \"./check-local-storage\";\nimport { btnLike } from \"./btn-favorite\";\nimport { btnRead } from \"./btn-read\";\n\nconst inputEl = document.querySelector(\".search-input\"),\n  formEl = document.querySelector(\".search-form\");\n\nformEl.addEventListener(\"submit\", event => {\n  event.preventDefault();\n\n  let value = inputEl.value.toLowerCase().trim();\n  let arr = getLocalarr();\n  if (arr === null) return;\n  let hits = checkArr(arr, value);\n\n  if (hits.length === 0) {\n    block.innerHTML = \"\";\n    // document.querySelector(\".underfined\").classList.remove(\"underfined-hidden\");\n    return;\n  }\n\n  let markup = createMarkup(hits);\n  block.innerHTML = markup;\n  //   document.querySelector(\".underfined\").classList.add(\"underfined-hidden\");\n});\n\nfunction getLocalarr() {\n  return JSON.parse(localStorage.getItem(\"favoriteCards\"));\n}\nfunction checkArr(arr, value) {\n  return arr.reduce((hits, elem) => {\n    if (\n      elem.headline.toLowerCase().includes(value) ||\n      elem.abstract.toLowerCase().includes(value) ||\n      elem.category.toLowerCase().includes(value)\n    ) {\n      hits.push(elem);\n    }\n    return hits;\n  }, []);\n}\n\n// const undefinedReadeMore = document.querySelector('.underfined');\nconst block = document.querySelector(\".card-news\");\nconst newList = document.querySelector(\".card-news\");\n\n// document\n//   .querySelector('.news-loader__container.container')\n//   .classList.add('is-hidden');\n\n// document.querySelector('.page-container').classList.add('pagination-hidden');\n// document\n//   .querySelector('.page-container-cat')\n//   .classList.add('pagination-cat-hidden');\n\nnewList.addEventListener(\"click\", removeToFavorite);\nconst dataInLocal = JSON.parse(localStorage.getItem(\"favoriteCards\"));\n\nif (dataInLocal === null) {\n  //   undefinedReadeMore.classList.remove(\"underfined-hidden\");\n  return;\n}\nfunction removeToFavorite(e) {\n  const btn = e.target.closest(`.card-news__add-to-favorite-btn`);\n  if (!btn) return;\n  if (!dataInLocal) {\n    return;\n  }\n  let title = btn.parentNode.nextElementSibling.firstElementChild.textContent;\n\n  for (let i = 0; i < dataInLocal.length; i += 1) {\n    if (dataInLocal[i].headline === title) {\n      dataInLocal.splice(i, 1);\n    }\n  }\n  localStorage.setItem(`favoriteCards`, JSON.stringify(dataInLocal));\n  btn.parentNode.parentNode.remove();\n  // location.reload();\n}\n\nfunction getLocalData() {\n  if (localStorage.getItem(\"favoriteCards\") === null) return;\n  if (JSON.parse(localStorage.getItem(\"favoriteCards\")).length === 0) {\n    console.log(\"error\");\n    // undefinedReadeMore.classList.remove(\"underfined-hidden\");\n    return;\n  }\n  const data = JSON.parse(localStorage.getItem(\"favoriteCards\"));\n  const markup = createMarkup(data);\n  block.insertAdjacentHTML(\"beforeend\", markup);\n}\n\ngetLocalData();\n\nfunction createMarkup(arr) {\n  const newArr = arr\n    .map(array => {\n      let opacity = \"\";\n      let hidden = \"hidden\";\n      let localArr = JSON.parse(localStorage.getItem(\"readCards\"));\n      let check = checkLokalStorage(array, localArr);\n      if (check === true) {\n        opacity = \"opacity\";\n        hidden = \"\";\n      }\n      let spanAdd = \"\";\n      let hiddenSpan = \"\";\n      let localFavorite = JSON.parse(localStorage.getItem(\"favoriteCards\"));\n      let checkFavorite = checkLokalStorage(array, localFavorite);\n      if (checkFavorite === true) {\n        hiddenSpan = \"favorite\";\n        spanAdd = \"Remove from favorite\";\n      } else {\n        spanAdd = \"Add to favorite\";\n      }\n      return `<li class=\"card-news__item \">\n        <img class=\"card-news__img ${opacity}\" src=\"${array.photo}\" alt=\"\" loading=\"lazy\" />\n        <span class=\"card-news__categories\">${array.category}</span>\n        <span class=\"card-news__read ${hidden} \">Already read \n      <svg\n              class=\"icon-read\"\n              width=\"15\"\n              height=\"15\"\n              viewBox=\"0 0 43 32\"\n            >\n            <path fill=\"#00dd73\" style=\"fill: var(--color1, #00dd73)\" d=\"M40.502 1.584c-0.415 0.012-0.81 0.186-1.1 0.484l-24.469 24.469-10.069-10.069c-0.147-0.154-0.324-0.276-0.519-0.361s-0.406-0.129-0.619-0.131c-0.213-0.002-0.424 0.038-0.621 0.119s-0.376 0.199-0.527 0.35c-0.151 0.151-0.269 0.33-0.35 0.527s-0.121 0.408-0.119 0.621c0.002 0.213 0.047 0.423 0.131 0.619s0.207 0.372 0.361 0.519l11.2 11.2c0.3 0.3 0.707 0.469 1.131 0.469s0.831-0.169 1.131-0.469l25.6-25.6c0.231-0.225 0.389-0.514 0.453-0.83s0.031-0.644-0.095-0.941c-0.126-0.297-0.338-0.549-0.609-0.723s-0.589-0.262-0.911-0.253z\"></path>\n            </svg></span>\n        <button class=\"card-news__btn-like ${hiddenSpan}\">\n          <span class=\"card-news__add-to-favorite-btn\"\n            >${spanAdd}\n          </span>\n          <svg\n              class=\"card-news__icon-like\"\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 37 32\"\n            >\n              <path\n                style=\"stroke: var(--color1, #4440f7)\"\n                stroke-linejoin=\"round\"\n                stroke-linecap=\"round\"\n                stroke-miterlimit=\"4\"\n                stroke-width=\"2.2857\"\n                d=\"M10.666 2.286c-4.207 0-7.619 3.377-7.619 7.543 0 3.363 1.333 11.345 14.458 19.413 0.235 0.143 0.505 0.219 0.78 0.219s0.545-0.076 0.78-0.219c13.125-8.069 14.458-16.050 14.458-19.413 0-4.166-3.412-7.543-7.619-7.543s-7.619 4.571-7.619 4.571-3.412-4.571-7.619-4.571z\"\n              ></path>\n            </svg>\n        </button>\n        <div class=\"card-news__wrapper\">\n          <h3 class=\"card-news__caption\">${array.headline}</h3>\n          <p class=\"card-news__text\">${array.abstract}</p>\n        </div>\n        <div class=\"card-news__box\">\n          <span class=\"card-news__time\">${array.pub_date}</span>\n          <a class=\"card-news__link\" target=\"_blank\" href=\"${array.url}\">Read more</a>\n        </div>\n        </li>`;\n    })\n    .join(\"\");\n  btnLike(newArr);\n  btnRead(newArr);\n  return newArr;\n}\n// document.querySelector('.news-loader__container ').classList.add('is-hidden');\n","export function checkLokalStorage(elem, localArr) {\n  if (localArr === null) {\n    return;\n  }\n  for (let i = 0; i < localArr.length; i += 1) {\n    if (localArr[i].url === elem.url) {\n      return true;\n    }\n  }\n}\n","// import { checkLokalStorage } from \"./check-local-storage\";\nexport const favoriteCards = [];\nexport function btnLike(newArray) {\n  const btnLike = document.querySelectorAll(\".card-news__btn-like\");\n  const spanAdd = document.querySelectorAll(\".card-news__add-to-favorite-btn\");\n  const iconLike = document.querySelectorAll(\".card-news__icon-like\");\n\n  btnLike.forEach((btn, index) => {\n    let isFavorite = false; // начальное значение\n\n    btn.addEventListener(\"click\", () => {\n      if (!isFavorite) {\n        spanAdd[index].textContent = \"Remove from favorite\";\n        iconLike[index].style.fill = \"var(--color1, #4440f7)\";\n        btn.classList.add(\"favorite\"); // добавить класс\n        isFavorite = true; // обновить значение\n      } else {\n        spanAdd[index].textContent = \"Add to favorite\";\n        iconLike[index].style.fill = \"\";\n        btn.classList.remove(\"favorite\"); // убрать класс\n        isFavorite = false; // обновить значение\n      }\n    });\n  });\n\n  btnLike.forEach((btn, index) => {\n    let isFavorite = false;\n    btn.addEventListener(\"click\", () => {\n      if (!isFavorite) {\n        // Добавляем информацию о карточке в массив\n        favoriteCards.push({\n          headline: newArray[index].headline,\n          abstract: newArray[index].abstract,\n          category: newArray[index].category,\n          pub_date: newArray[index].pub_date,\n          photo: newArray[index].photo,\n          url: newArray[index].url,\n        });\n        // Обновляем локальное хранилище\n        localStorage.setItem(\"favoriteCards\", JSON.stringify(favoriteCards));\n        isFavorite = true;\n      }\n      //   else {\n      //     // Удаляем информацию о карточке из массива\n      //     const cardIndex = favoriteCards.findIndex(\n      //       card => card.headline === newArray[index].headline\n      //     );\n      //     if (cardIndex !== -1) {\n      //       favoriteCards.splice(cardIndex, 1);\n      //       // Обновляем локальное хранилище\n      //       localStorage.setItem(\"favoriteCards\", JSON.stringify(favoriteCards));\n      //     }\n      //     isFavorite = false;\n      //     // console.log(favoriteCards);\n      //   }\n      //   console.log(favoriteCards);\n    });\n    // console.log(favoriteCards);\n  });\n}\n\n// const newsList = document.querySelector(\".card-news\");\n\n// newsList.addEventListener(\"click\", btnAddToFavorite);\n// let newLocalStorage = [];\n\n// function isLocalEmpty() {\n//   if (JSON.parse(localStorage.getItem(\"favoriteCards\")) === null) {\n//     newLocalStorage = [];\n//     return;\n//   }\n//   newLocalStorage = JSON.parse(localStorage.getItem(\"favoriteCards\"));\n// }\n// isLocalEmpty();\n\n// function btnAddToFavorite(event) {\n//   const btn = event.target.closest(\".card-news__btn-like\");\n//   if (!btn) return;\n//   isLocalEmpty();\n//   let url =\n//     btn.parentNode.nextElementSibling.nextElementSibling.lastElementChild\n//       .textContent;\n//   if (!btn.classList.contains(\"favorite\")) {\n//     btn.classList.add(\"favorite\");\n//     addToFavoriteLocal(btn);\n//     return;\n//   }\n//   btn.classList.remove(\"favorite\");\n//   for (let i = 0; i < newLocalStorage.length; i += 1) {\n//     if (newLocalStorage[i].url === url) {\n//       newLocalStorage.splice(i, 1);\n//     }\n//   }\n//   localStorage.setItem(`favoriteCards`, JSON.stringify(newLocalStorage));\n// }\n\n// function addToFavoriteLocal(btn) {\n//   const favoriteCard = {\n//     id: btn.parentNode.parentNode.id,\n//     img: btn.parentNode.childNodes[1].attributes.src.nodeValue,\n//     category: btn.parentNode.childNodes[3].innerText,\n//     title: btn.parentNode.parentNode.childNodes[3].children[0].innerText,\n//     description: btn.parentNode.parentNode.childNodes[3].children[1].innerText,\n//     date: btn.parentNode.parentNode.lastElementChild.children[0].innerText,\n//     link: btn.parentNode.parentNode.lastElementChild.children[1].attributes[2]\n//       .value,\n//     favorite: \"true\",\n//     url: btn.parentNode.nextElementSibling.nextElementSibling.lastElementChild\n//       .textContent,\n//   };\n//   for (let i = 0; i < newLocalStorage.length; i += 1) {\n//     if (newLocalStorage[i].url === favoriteCard.url) return;\n//   }\n\n//   newLocalStorage.push(favoriteCards);\n//   localStorage.setItem(`favoriteCards`, JSON.stringify(newLocalStorage));\n// }\n","export function btnRead(newArray) {\n  const readCards = [];\n  const btnRead = document.querySelectorAll(\".card-news__link\");\n  const iconRead = document.querySelector(\".card-news__read\");\n  const opacity = document.querySelector(\".card-news__img\");\n\n  btnRead.forEach((btn, index) => {\n    let isRead = false; // начальное значение\n\n    btn.addEventListener(\"visibilitychange\", function () {\n      if (document.hidden) {\n        // пользователь перешел на другую вкладку\n        //   console.log(\"Пользователь перешел на другую вкладку\");\n        return;\n      } else {\n        // пользователь вернулся на страницу\n        //   console.log(\"Пользователь вернулся на страницу\");\n        opacity[index].classList.add(\"opacity\");\n        iconRead[index].classList.remove(\"hidden\");\n        btn.classList.add(\"opacity\");\n        isRead = true; // обновить значение\n      }\n    });\n\n    // btn.addEventListener(\"click\", () => {\n    //   if (!isRead) {\n    //     opacity.classList.add(\"opacity\");\n    //     iconRead.classList.remove(\"hidden\");\n    //     isRead = true; // обновить значение\n    //   } else {\n    //     opacity[index].classList.remove(\"opacity\");\n    //     iconRead[index].classList.remove(\"hidden\");\n    //     isRead = false; // обновить значение\n    //   }\n    // });\n  });\n\n  btnRead.forEach((btn, index) => {\n    let isRead = false;\n    btn.addEventListener(\"click\", () => {\n      if (!isRead) {\n        // Добавляем информацию о карточке в массив\n        readCards.push({\n          headline: newArray[index].headline,\n          abstract: newArray[index].abstract,\n          category: newArray[index].category,\n          pub_date: newArray[index].pub_date,\n          photo: newArray[index].photo,\n          url: newArray[index].url,\n        });\n        // Обновляем локальное хранилище\n        localStorage.setItem(\"readCards\", JSON.stringify(readCards));\n        isRead = true;\n      } else {\n        // Удаляем информацию о карточке из массива\n        const cardIndex = readCards.findIndex(\n          card => card.headline === newArray[index].headline\n        );\n        if (cardIndex !== -1) {\n          readCards.splice(cardIndex, 1);\n          // Обновляем локальное хранилище\n          localStorage.setItem(\"readCards\", JSON.stringify(readCards));\n        }\n        isRead = false;\n      }\n    });\n  });\n  console.log(readCards);\n  return readCards;\n}\n"],"names":["$10QHX","parcelRequire","inputEl","document","querySelector","addEventListener","event","preventDefault","value","toLowerCase","trim","arr","JSON","parse","localStorage","getItem","hits","reduce","elem","headline","includes","abstract","category","push","checkArr","length","block","innerHTML","markup","createMarkup","e","btn","target","closest","dataInLocal","title","parentNode","nextElementSibling","firstElementChild","textContent","i","splice","setItem","stringify","remove","newArr","map","array","opacity","hidden","localArr","checkLokalStorage","spanAdd","hiddenSpan","localFavorite","photo","pub_date","url","join","$8EHkZ","btnLike","$1VWkq","btnRead","console","log","insertAdjacentHTML","getLocalData","$0bcead4044120b9d$export$6fa34716b1f69ee4","$64d3ad10ca1d7ccd$export$57a5be14e400305a","$64d3ad10ca1d7ccd$export$71556dfd7ea0c273","newArray","querySelectorAll","iconLike","forEach","index","isFavorite","style","fill","classList","add","$16885c1b2b30f49c$export$4f40a77b4454c984","readCards","iconRead","isRead","cardIndex","findIndex","card"],"version":3,"file":"favorite.2c530f1d.js.map"}